module llmc/OpArg

imports

    llmc/Common
    llmc/Path

context-free sorts Op-LL
context-free syntax

    Op-LL.OpAdd-LL = <add>
    Op-LL.OpSub-LL = <sub>
    Op-LL.OpMul-LL = <mul>
    Op-LL.OpDiv-LL = <div>
    Op-LL.OpMod-LL = <mod>
    Op-LL.OpCountElements-LL = <count>
    Op-LL.OpCompareGt-LL = <gt>
    Op-LL.OpFind-LL = <find>
    Op-LL.OpGetBlockEntityData-LL = <getbe>
    Op-LL.OpPopLeft-LL = <popl>
    Op-LL.OpDel-LL = <del>
    Op-LL.OpInvoke-LL = <ivk>

context-free sorts Arg-LL
context-free syntax

    Arg-LL.ArgVar-LL = ID
    Arg-LL.ArgRef-LL = NSID-LL
    Arg-LL.ArgString-LL = STRING
    Arg-LL.ArgBoolT-LL = <true>
    Arg-LL.ArgBoolF-LL = <false>
    Arg-LL.ArgIntB-LL = <<INT>B>
    Arg-LL.ArgIntS-LL = <<INT>S>
    Arg-LL.ArgIntI-LL = <<INT>I>
    Arg-LL.ArgIntL-LL = <<INT>L>
    Arg-LL.ArgFloatS-LL = <<FLOAT>F> // single-precision
    Arg-LL.ArgFloatD-LL = <<FLOAT>D> // double-precision
    Arg-LL.ArgList-LL = <l[<{Arg-LL ", "}*>]>
    Arg-LL.ArgArray-LL = <a[<{Arg-LL ", "}*>]>
    Arg-LL.ArgCompound-LL = <c[<{CompoundEntry-LL ", "}*>]>
    Arg-LL.ArgPos-LL = <p[<PosKind-LL>; <PosCoordKind-LL> <Arg-LL>, <PosCoordKind-LL> <Arg-LL>, <PosCoordKind-LL> <Arg-LL>]>
    Arg-LL.ArgRes-LL = <r[<NSID-LL>, <NSID-LL>]<ResourceState-LL>>
    Arg-LL.ArgTag-LL = <t[<NSID-LL>]>
    Arg-LL.ArgPath-LL = Path-LL
    Arg-LL.ArgSelector-LL = <<SelectorType-LL>[<{SelectorProp-LL ", "}*>]>
    Arg-LL.ArgRaw-LL = <|[<{UnsafePart-LL ", "}+>]>
    Arg-LL.ArgUnsafe-LL = </[<{UnsafePart-LL ", "}+>]>

lexical syntax

    ID = "true" {reject}
    ID = "false" {reject}

context-free sorts CompoundEntry-LL
context-free syntax

    CompoundEntry-LL.CompoundEntry-LL = <<ID> <Arg-LL>>

context-free sorts PosCoordKind-LL
context-free syntax

    PosCoordKind-LL.PosCoordAbs-LL = <>
    PosCoordKind-LL.PosCoordDyn-LL = <dyn>

context-free sorts ResourceState-LL StateKv-LL
context-free syntax

    ResourceState-LL.NoResourceState-LL = <>
    ResourceState-LL.StatesWithPayload-LL = <+[<{StateKv-LL ", "}*>][<Arg-LL?>]>
    StateKv-LL.StateKv-LL = <<ID> = <Arg-LL>>

context-free sorts SelectorType-LL SelectorProp-LL SelectorPropKv-LL
context-free syntax

    SelectorType-LL.SelectorE-LL = <@e>
    SelectorType-LL.SelectorA-LL = <@a>
    SelectorType-LL.SelectorP-LL = <@p>
    SelectorType-LL.SelectorR-LL = <@r>
    SelectorType-LL.SelectorS-LL = <@s>

    SelectorProp-LL.SelectorPropKv-LL = <<SelectorPropKv-LL>>
    SelectorProp-LL.SelectorPropMap-LL = <<ID> = {<{SelectorPropKv-LL ", "}*>}>

    SelectorPropKv-LL.SelectorPropKvEqual-LL = <<ID> = <Arg-LL>>
    SelectorPropKv-LL.SelectorPropKvNotEqual-LL = <<ID> != <Arg-LL>>

context-free sorts UnsafePart-LL
context-free syntax

    UnsafePart-LL.UnsafePartFormatted-LL = <(<ID>) <Arg-LL>>
