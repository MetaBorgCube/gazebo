module generate

imports

  signatures/gazebo-core/-
  signatures/gazebo/-
  // BUG: this would have been sufficient (below), but transitive imports are not so great for source deps apparently
  signatures/-

  // for temporary workaround
  injections/gazebo-core/-
  injections/llmc/-
  injections/-

  common
  desugar
  transform

rules

  generate-llmc: Start-C(IdentFull-C(ns, name*), tlis) -> transformed
    with // the implicate-injections-gazebo-core is a temporary workaround for it not working correctly in Statix runtime
      desugared := <map(implicate-injections-gazebo-core); desugar-all> tlis
    ; transformed := <filter(relevant-tli); map(transform-tli(|[ns | name*]))> desugared
